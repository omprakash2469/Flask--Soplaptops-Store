{% extends '/main/layout.html' %}
{% block content %}
<!-- HEADER -->
<header>
    <!-- SLIDER -->
    <div class="slider-container">

        <!-- SLIDES -->
        <div class="relative">
            <div class="bg-black transition-all" id="slider">
                <div class="relative h-[500px] md:h-[600px] transition-all">
                    <!-- SLIDER IMAGE -->
                    <img class="w-full h-full object-cover opacity-60"
                        src="{{ url_for('static', filename='assets/images/slider/bg1.jpg') }}" alt="slider first image">

                    <!-- SLIDER INFO -->
                    <div
                        class="slider-content absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-[90%] text-white sm:text-center md:w-[600px]">
                        <strong class="block text-lg mb-4 font-semibold">ASUS</strong>
                        <h1 class="mb-12 text-5xl">Inspiring Innovation - Persistent Perfection </h1>
                        <a href="#trendyProducts"
                            class="border border-white px-4 py-2 hover:bg-white hover:text-black transition-all md:border-[1.9px] md:px-6 md:py-2">Explore
                            Laptops</a>
                    </div>
                </div>
                <div class="relative hidden h-[500px] md:h-[600px] transition-all">
                    <!-- SLIDER IMAGE -->
                    <img class="w-full h-full object-cover opacity-60"
                        src="{{ url_for('static', filename='assets/images/slider/bg2.jpg') }}" alt="slider first image">

                    <!-- SLIDER INFO -->
                    <div
                        class="slider-content absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-[90%] text-white sm:text-center md:w-[600px]">
                        <strong class="block text-lg mb-4 font-semibold">APPLE</strong>
                        <h1 class="mb-12 text-5xl">Think Different</h1>
                        <a href="/"
                            class="border border-white px-4 py-2 hover:bg-white hover:text-black transition-all md:border-[1.9px] md:px-6 md:py-2">Shop
                            Now</a>
                    </div>
                </div>
                <div class="relative hidden h-[500px] md:h-[600px] transition-all">
                    <!-- SLIDER IMAGE -->
                    <img class="w-full h-full object-cover opacity-60"
                        src="{{ url_for('static', filename='assets/images/slider/bg3.jpg') }}" alt="slider first image">

                    <!-- SLIDER INFO -->
                    <div
                        class="slider-content absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-[90%] text-white sm:text-center md:w-[600px]">
                        <strong class="block text-lg mb-4 font-semibold">DELL</strong>
                        <h1 class="mb-12 text-5xl">Innovation That Stops At Nothing</h1>
                        <a href="/"
                            class="border border-white px-4 py-2 hover:bg-white hover:text-black transition-all md:border-[1.9px] md:px-6 md:py-2">Shop
                            Now</a>
                    </div>
                </div>
            </div>

            <!-- SLIDER BUTTONS -->
            <div class="hidden md:flex slide-buttons absolute left-8 right-8 top-1/2 -translate-y-1/2 justify-between">
                <button class="w-10" id="leftarrow">
                    <img class="w-full object-cover transition-all invert hover:invert-0"
                        src="{{ url_for('static', filename='assets/images/icons/leftarrow.svg') }}" alt="">
                </button>
                <button class="w-10" id="rightarrow">
                    <img class="w-full object-cover transition-all invert hover:invert-0"
                        src="{{ url_for('static', filename='assets/images/icons/rightarrow.svg') }}" alt="">
                </button>
            </div>
        </div>

        <!-- SLIDER DOTS -->
        <div class="text-[5px] py-4 text-center space-x-4" id="dots">
            <span class="ml-4"><i class="fa-solid fa-circle"></i></span>
            <span><i class="fa-solid fa-circle"></i></span>
            <span><i class="fa-solid fa-circle"></i></span>
        </div>
    </div>
</header>
<!--/ HEADER -->
<!-- CATEGORIES -->
<section class="body-font">
    <div class="mb-8 mt-6 px-5">
        <h1 class="text-xl mt-10 md:text-center font-lato font-semibold tracking-wider"><span
                class="underline underline-offset-8 md:no-underline">PR</span>ODUC<span
                class="md:underline md:underline-offset-8">T C</span>ATEGORY</h1>
    </div>
    <div class="px-5 pb-24 pt-2 mx-auto sm:flex sm:flex-wrap">
        <div class="md:-m-2 -m-1">
            <div class="md:grid md:grid-cols-2 lg:grid-cols-3" id="cat1">
                {% for category in categories %}
                <div class="md:p-2 p-1 relative">
                    <a href="{{url_for('main.productArchives', category=category.category.lower())}}">
                        <img alt="gallery"
                            class="w-full object-cover h-full object-center block hover:opacity-80 transition-all"
                            src="{{ url_for('static', filename='assets/images/category/')}}{{category.category_img}}">
                    </a>
                    <div class="absolute bg-black/60 text-white top-6 left-6 ">
                        <h2 class="font-semibold px-3 py-1 text-sm 2xl:px-6 2xl:py-2 font-source tracking-wider">{{category.category|upper()}}
                        </h2>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>


<!-- TRENDY PRODUCTS -->
<div class="product-category px-4 py-8 bg-gray-100" id="trendyProducts">
    <h1 class="text-xl mt-5 mb-12 sm:px-8 md:text-center font-lato tracking-wider font-semibold"><span
            class="underline underline-offset-8 md:no-underline">TR</span>END<span
            class="md:underline md:underline-offset-8">Y P</span>RODUCT</h1>

    <!-- PRODUCTS -->
    <div
        class="categories pb-14 space-y-8 sm:w-4/6 sm:m-auto md:grid md:grid-cols-2 md:gap-8 md:w-11/12 xl:grid-cols-3 xl:gap-6 xl:w-[1200px]">
        {% for key, value in products.items() %}
        {% for id, item in value.items() %}
        <div class="product-info md:mt-8">
            <figure class="relative">
                <div class="relative">
                    <a href="{{url_for('main.singleProductPage', category=key, slug=value[id].slug)}}"
                        class="bg-black after:transition-all after:block after:absolute after:inset-0 hover:after:bg-black/30 after:w-full">
                        <img class="w-full object-cover"
                            src="{{url_for('static', filename='assets/images/products/')}}{{key}}/{{getProductImages(False, *[value[id].id])}}"
                            alt="{{value[id].product}}">
                    </a>
                </div>
                <figcaption class="text-center py-3">
                    <h2 class="font-semibold mb-1 font-source text-xl"><a href="{{url_for('main.singleProductPage', category=key, slug=value[id].slug)}}">{{value[id].product}}</a></h2>
                    <p class="font-lato">Rs. {{value[id].price}}</p>
                </figcaption>
            </figure>
        </div>
        {% endfor %}
        {% endfor %}
    </div>
</div>

<!-- BLOGS SECTION -->
<div class="product-category px-4 py-10 bg-white">
    <h1 class="text-xl mt-5 mb-12 sm:px-8 md:text-center font-lato tracking-wider font-semibold"><span
            class="underline underline-offset-8 md:no-underline">OU</span><span
            class="md:underline md:underline-offset-8">R B</span>LOGS</h1>

    <!-- BLOGS -->
    <div class="lg:w-[90%] lg:m-auto xl:w-[1200px] py-10 xl:py-16 px-5 md:px-0 grid gap-8 md:gap-10 xl:gap-14 sm:grid-cols-2">
        {% for blog in blogs %}
        <figure class="shadow-md shadow-gray-200 bg-gray-100">
            <a href="{{url_for('main.single_blog', slug=blog.slug)}}" class="block overflow-hidden">
                <img src="{{ url_for('static', filename='assets/images/blogs/')}}{{blog.image}}"
                    alt="{{blog.title}}" class="block w-full object-cover hover:scale-110 transition-all duration-300 hover:opacity-90">
            </a>
            <figcaption class="p-4">
                <h2 class="font-semibold text-xl font-lato mb-3 md:text-2xl xl:text-3xl hover:text-gray-700 transition-all"><a href="{{url_for('main.single_blog', slug=blog.slug)}}">{{blog.title}}</a></h2>
                <p class="text-sm leading-5 font-source text-gray-700 mb-4 md:text-base xl:text-lg">{{blog.intro[:150]}}..</p>
                <div class="flex justify-between items-center">
                    <span class="md:text-lg">{{blog.views}}+ Views</span>
                    <a href="{{url_for('main.single_blog', slug=blog.slug)}}" class="block w-max bg-black text-white px-4 py-2 text-xs md:text-base xl:text-lg hover:bg-gray-700 transition-all">Read More</a>
                </div>
            </figcaption>
        </figure>
        {% endfor %}
    </div>
</div>

<!-- SUBSCRIBE TO NEW LETTER -->
<div class="subscribe-wrapper py-16 px-4 text-center bg-gray-100" id="subscribe">
    <div class="subscribe-container m-auto md:w-[768px]">
        <h1 class="text-xl my-7 mb-3 font-semibold">SUBSCRIBE TO NEWSLETTER</h1>
        <P class="text-base mb-10">
            Subscribe to our Newletter to get Best Deals on Laptops. Laptops according to your need
        </P>
        <form action="/" method="post" class="w-full border border-gray-300 sm:flex md:w-[668px] md:m-auto">
            {{form.hidden_tag()}}
            {{form.email(class="w-full text-center border border-gray-200 px-5 py-4 sm:w-[70%] sm:text-left
            outline-none", placeholder="Enter your Email Address here")}}
            {{form.submit(class="px-5 py-4 bg-black w-full text-white text-sm transition-all hover:bg-gray-800
            sm:w-[30%] cursor-pointer")}}
        </form>
        {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
        {% for category, msg in messages %}
        <P class="text-base text-center md:w-[668px] {{category}} md:mx-auto py-2">
            {{msg}}
        </P>
        {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
</div>
{% endblock %}

{% block javascript %}
<script>
    // Slider
    const slides = document.getElementById('slider').children
    const leftArrow = document.getElementById('leftarrow')
    const rightArrow = document.getElementById('rightarrow')

    let currSlide = 0

    rightArrow.addEventListener('click', () => {
        currSlide++
        if (currSlide > slides.length - 1) {
            currSlide = 0

        }
        setActiveSlide()
        // console.log(currSlide)
    })

    leftArrow.addEventListener('click', () => {
        currSlide--
        if (currSlide < 0) {
            currSlide = slides.length - 1

        }
        setActiveSlide()
        // console.log(currSlide)
    })

    function setActiveSlide() {
        //remove active class from all
        for (const slide of slides) {
            slide.classList.add('hidden')
        }
        //only adding active class to the currently active slide
        slides[currSlide].classList.remove('hidden')
    }
</script>

{% endblock %}